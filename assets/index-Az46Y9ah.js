import{aq as Q,d as Ee,b as Pe,e as we,t as A,aH as ze,r as ne,I as de,p as O,C as Me,bu as $e,aA as Be,aF as ce,aT as Ve,c as k,S as oe,bv as De,bn as Re,aR as He,aQ as Fe,aP as Ne,aW as Ue,a6 as U,a4 as Ye,a5 as Ke,_ as Xe,a$ as H,g as w,o as m,w as B,aG as J,s as M,n as c,y as q,V as fe,f as x,h as V,j as F,F as N,v as W,aO as _,x as me,U as je,bw as qe,E as We,aN as Ge,q as Ze,K as se,b0 as ve,bx as pe,aM as Qe,ao as te,ah as le,a9 as Je,bq as ke,by as Se,aZ as ge,aS as Te,ag as ye,aX as xe}from"./index-ClAeb_nj.js";import{E as _e,e as be}from"./el-button-Vc6VEKII.js";import{t as en,o as he,a as nn}from"./el-input-CFf0CTHR.js";import{P as ee,s as on,E as sn}from"./el-table-column-DnVx5bAE.js";const Ie=e=>{if(!e)return{onClick:Q,onMousedown:Q,onMouseup:Q};let n=!1,t=!1;return{onClick:i=>{n&&t&&e(i),n=t=!1},onMousedown:i=>{n=i.target===i.currentTarget},onMouseup:i=>{t=i.target===i.currentTarget}}},tn=Pe({mask:{type:Boolean,default:!0},customMaskEvent:Boolean,overlayClass:{type:de([String,Array,Object])},zIndex:{type:de([String,Number])}}),an={click:e=>e instanceof MouseEvent},ln="overlay";var rn=Ee({name:"ElOverlay",props:tn,emits:an,setup(e,{slots:n,emit:t}){const l=we(ln),a=f=>{t("click",f)},{onClick:s,onMousedown:i,onMouseup:d}=Ie(e.customMaskEvent?void 0:a);return()=>e.mask?A("div",{class:[l.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:s,onMousedown:i,onMouseup:d},[ne(n,"default")],ee.STYLE|ee.CLASS|ee.PROPS,["onClick","onMouseup","onMousedown"]):ze("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[ne(n,"default")])}});const un=rn,dn=(e,n,t,l)=>{const a={offsetX:0,offsetY:0},s=O(!1),i=(v,h)=>{if(e.value){const{offsetX:z,offsetY:p}=a,E=e.value.getBoundingClientRect(),g=E.left,C=E.top,I=E.width,$=E.height,R=document.documentElement.clientWidth,K=document.documentElement.clientHeight,G=-g+z,L=-C+p,X=R-g-I+z,Z=K-C-($<K?$:0)+p;l?.value||(v=Math.min(Math.max(v,G),X),h=Math.min(Math.max(h,L),Z)),a.offsetX=v,a.offsetY=h,e.value.style.transform=`translate(${ce(v)}, ${ce(h)})`}},d=v=>{const h=v.clientX,z=v.clientY,{offsetX:p,offsetY:E}=a,g=I=>{s.value||(s.value=!0);const $=p+I.clientX-h,R=E+I.clientY-z;i($,R)},C=()=>{s.value=!1,document.removeEventListener("mousemove",g),document.removeEventListener("mouseup",C)};document.addEventListener("mousemove",g),document.addEventListener("mouseup",C)},f=()=>{n.value&&e.value&&(n.value.addEventListener("mousedown",d),window.addEventListener("resize",u))},o=()=>{n.value&&e.value&&(n.value.removeEventListener("mousedown",d),window.removeEventListener("resize",u))},T=()=>{a.offsetX=0,a.offsetY=0,e.value&&(e.value.style.transform="")},u=()=>{const{offsetX:v,offsetY:h}=a;i(v,h)};return Me(()=>{$e(()=>{t.value?f():o()})}),Be(()=>{o()}),{isDragging:s,resetPosition:T,updatePosition:u}},cn=(e,n={})=>{Ve(e)||en("[useLockscreen]","You need to pass a ref param to this function");const t=n.ns||we("popup"),l=k(()=>t.bm("parent","hidden"));let a=0,s=!1,i="0";const d=()=>{setTimeout(()=>{typeof document>"u"||s&&document&&(document.body.style.width=i,Ne(document.body,l.value))},200)};oe(e,f=>{if(!f){d();return}s=!Re(document.body,l.value),s&&(i=document.body.style.width,He(document.body,l.value)),a=on(t.namespace.value);const o=document.documentElement.clientHeight<document.body.scrollHeight,T=Fe(document.body,"overflowY");a>0&&(o||T==="scroll")&&s&&(document.body.style.width=`calc(100% - ${a}px)`)}),De(()=>d())},fn=e=>["",...Ue].includes(e),ae="_trap-focus-children",P=[],Ce=e=>{if(P.length===0)return;const n=Ye(e),t=P[P.length-1][ae];if(t.length>0&&n===Ke.tab){if(t.length===1){e.preventDefault(),document.activeElement!==t[0]&&t[0].focus();return}const l=e.shiftKey,a=e.target===t[0],s=e.target===t[t.length-1];a&&l&&(e.preventDefault(),t[t.length-1].focus()),s&&!l&&(e.preventDefault(),t[0].focus())}},mn={beforeMount(e){e[ae]=he(e),P.push(e),P.length<=1&&document.addEventListener("keydown",Ce)},updated(e){U(()=>{e[ae]=he(e)})},unmounted(){P.shift(),P.length===0&&document.removeEventListener("keydown",Ce)}},vn=Ee({name:"ElMessageBox",directives:{TrapFocus:mn},components:{ElButton:_e,ElFocusTrap:sn,ElInput:nn,ElOverlay:un,ElIcon:We,...qe},inheritAttrs:!1,props:{buttonSize:{type:String,validator:fn},modal:{type:Boolean,default:!0},lockScroll:{type:Boolean,default:!0},showClose:{type:Boolean,default:!0},closeOnClickModal:{type:Boolean,default:!0},closeOnPressEscape:{type:Boolean,default:!0},closeOnHashChange:{type:Boolean,default:!0},center:Boolean,draggable:Boolean,overflow:Boolean,roundButton:Boolean,container:{type:String,default:"body"},boxType:{type:String,default:""}},emits:["vanish","action"],setup(e,{emit:n}){const{locale:t,zIndex:l,ns:a,size:s}=Ge("message-box",k(()=>e.buttonSize)),{t:i}=t,{nextZIndex:d}=l,f=O(!1),o=Ze({autofocus:!0,beforeClose:null,callback:null,cancelButtonText:"",cancelButtonClass:"",confirmButtonText:"",confirmButtonClass:"",customClass:"",customStyle:{},dangerouslyUseHTMLString:!1,distinguishCancelAndClose:!1,icon:"",closeIcon:"",inputPattern:null,inputPlaceholder:"",inputType:"text",inputValue:"",inputValidator:void 0,inputErrorMessage:"",message:"",modalFade:!0,modalClass:"",showCancelButton:!1,showConfirmButton:!0,type:"",title:void 0,showInput:!1,action:"",confirmButtonLoading:!1,cancelButtonLoading:!1,confirmButtonLoadingIcon:se(ve),cancelButtonLoadingIcon:se(ve),confirmButtonDisabled:!1,editorErrorMessage:"",validateError:!1,zIndex:d()}),T=k(()=>{const r=o.type;return{[a.bm("icon",r)]:r&&pe[r]}}),u=be(),v=be(),h=k(()=>{const r=o.type;return o.icon||r&&pe[r]||""}),z=k(()=>!!o.message),p=O(),E=O(),g=O(),C=O(),I=O(),$=k(()=>o.confirmButtonClass);oe(()=>o.inputValue,async r=>{await U(),e.boxType==="prompt"&&r&&ie()},{immediate:!0}),oe(()=>f.value,r=>{var y,b;r&&(e.boxType!=="prompt"&&(o.autofocus?g.value=(b=(y=I.value)==null?void 0:y.$el)!=null?b:p.value:g.value=p.value),o.zIndex=d()),e.boxType==="prompt"&&(r?U().then(()=>{var ue;C.value&&C.value.$el&&(o.autofocus?g.value=(ue=Oe())!=null?ue:p.value:g.value=p.value)}):(o.editorErrorMessage="",o.validateError=!1))});const R=k(()=>e.draggable),K=k(()=>e.overflow),{isDragging:G}=dn(p,E,R,K);Me(async()=>{await U(),e.closeOnHashChange&&window.addEventListener("hashchange",L)}),Be(()=>{e.closeOnHashChange&&window.removeEventListener("hashchange",L)});function L(){f.value&&(f.value=!1,U(()=>{o.action&&n("action",o.action)}))}const X=()=>{e.closeOnClickModal&&j(o.distinguishCancelAndClose?"close":"cancel")},Z=Ie(X),Le=r=>{if(o.inputType!=="textarea")return r.preventDefault(),j("confirm")},j=r=>{var y;e.boxType==="prompt"&&r==="confirm"&&!ie()||(o.action=r,o.beforeClose?(y=o.beforeClose)==null||y.call(o,r,o,L):L())},ie=()=>{if(e.boxType==="prompt"){const r=o.inputPattern;if(r&&!r.test(o.inputValue||""))return o.editorErrorMessage=o.inputErrorMessage||i("el.messagebox.error"),o.validateError=!0,!1;const y=o.inputValidator;if(te(y)){const b=y(o.inputValue);if(b===!1)return o.editorErrorMessage=o.inputErrorMessage||i("el.messagebox.error"),o.validateError=!0,!1;if(le(b))return o.editorErrorMessage=b,o.validateError=!0,!1}}return o.editorErrorMessage="",o.validateError=!1,!0},Oe=()=>{var r,y;const b=(r=C.value)==null?void 0:r.$refs;return(y=b?.input)!=null?y:b?.textarea},re=()=>{j("close")},Ae=()=>{e.closeOnPressEscape&&re()};return e.lockScroll&&cn(f,{ns:a}),{...Qe(o),ns:a,overlayEvent:Z,visible:f,hasMessage:z,typeClass:T,contentId:u,inputId:v,btnSize:s,iconComponent:h,confirmButtonClasses:$,rootRef:p,focusStartRef:g,headerRef:E,inputRef:C,isDragging:G,confirmRef:I,doClose:L,handleClose:re,onCloseRequested:Ae,handleWrapperClick:X,handleInputEnter:Le,handleAction:j,t:i}}}),pn=["aria-label","aria-describedby"],gn=["aria-label"],yn=["id"];function bn(e,n,t,l,a,s){const i=H("el-icon"),d=H("el-input"),f=H("el-button"),o=H("el-focus-trap"),T=H("el-overlay");return m(),w(je,{name:"fade-in-linear",onAfterLeave:n[11]||(n[11]=u=>e.$emit("vanish")),persisted:""},{default:B(()=>[J(A(T,{"z-index":e.zIndex,"overlay-class":[e.ns.is("message-box"),e.modalClass],mask:e.modal},{default:B(()=>[M("div",{role:"dialog","aria-label":e.title,"aria-modal":"true","aria-describedby":e.showInput?void 0:e.contentId,class:c(`${e.ns.namespace.value}-overlay-message-box`),onClick:n[8]||(n[8]=(...u)=>e.overlayEvent.onClick&&e.overlayEvent.onClick(...u)),onMousedown:n[9]||(n[9]=(...u)=>e.overlayEvent.onMousedown&&e.overlayEvent.onMousedown(...u)),onMouseup:n[10]||(n[10]=(...u)=>e.overlayEvent.onMouseup&&e.overlayEvent.onMouseup(...u))},[A(o,{loop:"",trapped:e.visible,"focus-trap-el":e.rootRef,"focus-start-el":e.focusStartRef,onReleaseRequested:e.onCloseRequested},{default:B(()=>[M("div",{ref:"rootRef",class:c([e.ns.b(),e.customClass,e.ns.is("draggable",e.draggable),e.ns.is("dragging",e.isDragging),{[e.ns.m("center")]:e.center}]),style:fe(e.customStyle),tabindex:"-1",onClick:n[7]||(n[7]=q(()=>{},["stop"]))},[e.title!==null&&e.title!==void 0?(m(),x("div",{key:0,ref:"headerRef",class:c([e.ns.e("header"),{"show-close":e.showClose}])},[M("div",{class:c(e.ns.e("title"))},[e.iconComponent&&e.center?(m(),w(i,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:B(()=>[(m(),w(F(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),M("span",null,N(e.title),1)],2),e.showClose?(m(),x("button",{key:0,type:"button",class:c(e.ns.e("headerbtn")),"aria-label":e.t("el.messagebox.close"),onClick:n[0]||(n[0]=u=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel")),onKeydown:n[1]||(n[1]=W(q(u=>e.handleAction(e.distinguishCancelAndClose?"close":"cancel"),["prevent"]),["enter"]))},[A(i,{class:c(e.ns.e("close"))},{default:B(()=>[(m(),w(F(e.closeIcon||"close")))]),_:1},8,["class"])],42,gn)):V("v-if",!0)],2)):V("v-if",!0),M("div",{id:e.contentId,class:c(e.ns.e("content"))},[M("div",{class:c(e.ns.e("container"))},[e.iconComponent&&!e.center&&e.hasMessage?(m(),w(i,{key:0,class:c([e.ns.e("status"),e.typeClass])},{default:B(()=>[(m(),w(F(e.iconComponent)))]),_:1},8,["class"])):V("v-if",!0),e.hasMessage?(m(),x("div",{key:1,class:c(e.ns.e("message"))},[ne(e.$slots,"default",{},()=>[e.dangerouslyUseHTMLString?(m(),w(F(e.showInput?"label":"p"),{key:1,for:e.showInput?e.inputId:void 0,innerHTML:e.message},null,8,["for","innerHTML"])):(m(),w(F(e.showInput?"label":"p"),{key:0,for:e.showInput?e.inputId:void 0,textContent:N(e.message)},null,8,["for","textContent"]))])],2)):V("v-if",!0)],2),J(M("div",{class:c(e.ns.e("input"))},[A(d,{id:e.inputId,ref:"inputRef",modelValue:e.inputValue,"onUpdate:modelValue":n[2]||(n[2]=u=>e.inputValue=u),type:e.inputType,placeholder:e.inputPlaceholder,"aria-invalid":e.validateError,class:c({invalid:e.validateError}),onKeydown:W(e.handleInputEnter,["enter"])},null,8,["id","modelValue","type","placeholder","aria-invalid","class","onKeydown"]),M("div",{class:c(e.ns.e("errormsg")),style:fe({visibility:e.editorErrorMessage?"visible":"hidden"})},N(e.editorErrorMessage),7)],2),[[_,e.showInput]])],10,yn),M("div",{class:c(e.ns.e("btns"))},[e.showCancelButton?(m(),w(f,{key:0,loading:e.cancelButtonLoading,"loading-icon":e.cancelButtonLoadingIcon,class:c([e.cancelButtonClass]),round:e.roundButton,size:e.btnSize,onClick:n[3]||(n[3]=u=>e.handleAction("cancel")),onKeydown:n[4]||(n[4]=W(q(u=>e.handleAction("cancel"),["prevent"]),["enter"]))},{default:B(()=>[me(N(e.cancelButtonText||e.t("el.messagebox.cancel")),1)]),_:1},8,["loading","loading-icon","class","round","size"])):V("v-if",!0),J(A(f,{ref:"confirmRef",type:"primary",loading:e.confirmButtonLoading,"loading-icon":e.confirmButtonLoadingIcon,class:c([e.confirmButtonClasses]),round:e.roundButton,disabled:e.confirmButtonDisabled,size:e.btnSize,onClick:n[5]||(n[5]=u=>e.handleAction("confirm")),onKeydown:n[6]||(n[6]=W(q(u=>e.handleAction("confirm"),["prevent"]),["enter"]))},{default:B(()=>[me(N(e.confirmButtonText||e.t("el.messagebox.confirm")),1)]),_:1},8,["loading","loading-icon","class","round","disabled","size"]),[[_,e.showConfirmButton]])],2)],6)]),_:3},8,["trapped","focus-trap-el","focus-start-el","onReleaseRequested"])],42,pn)]),_:3},8,["z-index","overlay-class","mask"]),[[_,e.visible]])]),_:3})}var hn=Xe(vn,[["render",bn],["__file","/home/runner/work/element-plus/element-plus/packages/components/message-box/src/index.vue"]]);const Y=new Map,Cn=e=>{let n=document.body;return e.appendTo&&(le(e.appendTo)&&(n=document.querySelector(e.appendTo)),ye(e.appendTo)&&(n=e.appendTo),ye(n)||(n=document.body)),n},En=(e,n,t=null)=>{const l=A(hn,e,te(e.message)||ke(e.message)?{default:te(e.message)?e.message:()=>e.message}:null);return l.appContext=t,Se(l,n),Cn(e).appendChild(n.firstElementChild),l.component},wn=()=>document.createElement("div"),Mn=(e,n)=>{const t=wn();e.onVanish=()=>{Se(null,t),Y.delete(a)},e.onAction=s=>{const i=Y.get(a);let d;e.showInput?d={value:a.inputValue,action:s}:d=s,e.callback?e.callback(d,l.proxy):s==="cancel"||s==="close"?e.distinguishCancelAndClose&&s!=="cancel"?i.reject("close"):i.reject("cancel"):i.resolve(d)};const l=En(e,t,n),a=l.proxy;for(const s in e)ge(e,s)&&!ge(a.$props,s)&&(s==="closeIcon"&&Te(e[s])?a[s]=se(e[s]):a[s]=e[s]);return a.visible=!0,a};function D(e,n=null){if(!Je)return Promise.reject();let t;return le(e)||ke(e)?e={message:e}:t=e.callback,new Promise((l,a)=>{const s=Mn(e,n??D._context);Y.set(s,{options:e,callback:t,resolve:l,reject:a})})}const Bn=["alert","confirm","prompt"],kn={alert:{closeOnPressEscape:!1,closeOnClickModal:!1},confirm:{showCancelButton:!0},prompt:{showCancelButton:!0,showInput:!0}};Bn.forEach(e=>{D[e]=Sn(e)});function Sn(e){return(n,t,l,a)=>{let s="";return Te(t)?(l=t,s=""):xe(t)?s="":s=t,D(Object.assign({title:s,message:n,type:"",...kn[e]},l,{boxType:e}),a)}}D.close=()=>{Y.forEach((e,n)=>{n.doClose()}),Y.clear()};D._context=null;const S=D;S.install=e=>{S._context=e._context,e.config.globalProperties.$msgbox=S,e.config.globalProperties.$messageBox=S,e.config.globalProperties.$alert=S.alert,e.config.globalProperties.$confirm=S.confirm,e.config.globalProperties.$prompt=S.prompt};const An=S;export{An as E,dn as a,un as b,Ie as c,fn as i,cn as u};
