import{E as Z}from"./el-button-DVrV4cDQ.js";import{E as q}from"./el-date-picker-panel-ChjBQYMv.js";import{b as J,E as Q,a as X}from"./el-input-Dwtsn4FB.js";import{b as ee,h as ae,c as le,e as te,f as re}from"./el-table-column-BBRnyYHQ.js";import{E as ne}from"./el-tag-fQWpZZ3I.js";import{E as ie}from"./el-card-LZGPE6VU.js";import{d as oe,p as g,g as _,w as t,s as E,t as e,y as se,v as S,x as m,F as U,aG as C,E as de,k as v,b6 as ue,aD as pe,bc as ce,at as me,aE as ve,bd as fe,as as ge,be as _e,z as o,b8 as be,o as b,B as ye}from"./index-BBqxh1Qt.js";import{P as he}from"./PageLayout-CIMKISqz.js";import{E as we}from"./EditDialog-DA9Hp7aN.js";import{E as Ne}from"./index-DlknRWU8.js";import"./index-CrP1vqAf.js";import"./el-overlay-_mPdsHLe.js";const Ve={class:"logistics-center"},ke={class:"table-action-buttons"},Ce={class:"pagination-container"},De=oe({__name:"LogisticsCenterView",setup(xe){const p=g({trackingNo:"",orderNo:"",status:void 0,carrier:void 0}),c=g({page:1,pageSize:10,total:100}),y=g([{trackingNo:"SF1234567890123",orderNo:"O-20251205-001",carrier:"sf_express",status:"delivered",recipientName:"张三",recipientPhone:"13800138001",recipientAddress:"北京市朝阳区某某街道123号",estimatedDelivery:"2025-12-05 18:00:00",actualDelivery:"2025-12-05 16:30:00",createdAt:"2025-12-03 10:00:00"},{trackingNo:"ZT9876543210987",orderNo:"O-20251205-002",carrier:"zhongtong",status:"in_transit",recipientName:"李四",recipientPhone:"13800138002",recipientAddress:"上海市浦东新区某某街道456号",estimatedDelivery:"2025-12-06 18:00:00",actualDelivery:null,createdAt:"2025-12-04 14:30:00"},{trackingNo:"ST6543210987654",orderNo:"O-20251205-003",carrier:"shentong",status:"shipped",recipientName:"王五",recipientPhone:"13800138003",recipientAddress:"广州市天河区某某街道789号",estimatedDelivery:"2025-12-07 18:00:00",actualDelivery:null,createdAt:"2025-12-05 09:15:00"},{trackingNo:"YT3210987654321",orderNo:"O-20251205-004",carrier:"yuantong",status:"pending",recipientName:"赵六",recipientPhone:"13800138004",recipientAddress:"深圳市南山区某某街道321号",estimatedDelivery:null,actualDelivery:null,createdAt:"2025-12-05 11:45:00"},{trackingNo:"YD4567890123456",orderNo:"O-20251205-005",carrier:"yunda",status:"exception",recipientName:"孙七",recipientPhone:"13800138005",recipientAddress:"杭州市西湖区某某街道654号",estimatedDelivery:"2025-12-05 18:00:00",actualDelivery:null,createdAt:"2025-12-02 16:30:00"}]),h=g(!1),D=g(!1),r=g({trackingNo:"",orderNo:"",carrier:"",recipientName:"",recipientPhone:"",recipientAddress:"",status:"",estimatedDelivery:""}),w=()=>{c.value.page=1,o.success("搜索完成")},T=()=>{p.value={trackingNo:"",orderNo:"",status:void 0,carrier:void 0},c.value.page=1,o.success("重置完成")},B=n=>{c.value.pageSize=n},Y=n=>{c.value.page=n},M=()=>{o.info("创建物流单功能开发中")},O=()=>{o.info("批量发货功能开发中")},F=()=>{o.info("物流商管理功能开发中")},$=()=>{o.info("异常追踪功能开发中")},I=n=>{o.info("追踪物流轨迹功能开发中")},L=n=>{r.value={trackingNo:n.trackingNo,orderNo:n.orderNo,carrier:n.carrier,recipientName:n.recipientName,recipientPhone:n.recipientPhone,recipientAddress:n.recipientAddress,status:n.status,estimatedDelivery:n.estimatedDelivery},h.value=!0},H=async()=>{try{if(D.value=!0,!r.value.recipientName||!r.value.recipientPhone||!r.value.recipientAddress){o.error("请填写完整的收件人信息");return}if(!/^1[3-9]\d{9}$/.test(r.value.recipientPhone)){o.error("请输入正确的手机号码");return}await new Promise(d=>setTimeout(d,1e3));const a=y.value.findIndex(d=>d.trackingNo===r.value.trackingNo);a!==-1&&y.value[a]&&Object.assign(y.value[a],{carrier:r.value.carrier,recipientName:r.value.recipientName,recipientPhone:r.value.recipientPhone,recipientAddress:r.value.recipientAddress,status:r.value.status,estimatedDelivery:r.value.estimatedDelivery}),h.value=!1,o.success("物流单信息已更新")}catch(n){o.error("更新物流单信息失败"),console.error("更新物流单失败:",n)}finally{D.value=!1}},K=n=>{o.info("打印面单功能开发中")},R=async n=>{try{await Ne.confirm(`确定要取消物流单「${n.trackingNo}」吗？此操作不可撤销。`,"取消物流单确认",{confirmButtonText:"确定取消",cancelButtonText:"保留物流单",type:"warning",customClass:"cancel-task-message-box",confirmButtonClass:"cancel-confirm-btn",distinguishCancelAndClose:!0,autofocus:!1}),o.success("物流单已取消")}catch(a){a!=="cancel"&&a!=="close"&&(o.error("取消物流单失败"),console.error("取消物流单失败:",a))}};return(n,a)=>{const d=X,s=Q,i=ae,N=ee,f=Z,P=J,A=ie,u=te,z=ne,V=de,j=le,G=re,W=q,k=be("permission");return b(),_(he,{title:"物流中心",actions:[{type:"primary",text:"创建物流单",icon:v(ve),onClick:M},{type:"success",text:"批量发货",icon:v(fe),onClick:O},{type:"info",text:"物流商管理",icon:v(ge),onClick:F},{type:"warning",text:"异常追踪",icon:v(_e),onClick:$}]},{default:t(()=>[E("div",Ve,[e(A,{shadow:"never",class:"search-form"},{default:t(()=>[e(P,{inline:!0,onSubmit:se(w,["prevent"])},{default:t(()=>[e(s,{label:"物流单号"},{default:t(()=>[e(d,{modelValue:p.value.trackingNo,"onUpdate:modelValue":a[0]||(a[0]=l=>p.value.trackingNo=l),placeholder:"请输入物流单号",clearable:"",onKeyup:S(w,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{label:"订单号"},{default:t(()=>[e(d,{modelValue:p.value.orderNo,"onUpdate:modelValue":a[1]||(a[1]=l=>p.value.orderNo=l),placeholder:"请输入订单号",clearable:"",onKeyup:S(w,["enter"])},null,8,["modelValue"])]),_:1}),e(s,{label:"物流状态"},{default:t(()=>[e(N,{modelValue:p.value.status,"onUpdate:modelValue":a[2]||(a[2]=l=>p.value.status=l),placeholder:"请选择物流状态",clearable:""},{default:t(()=>[e(i,{label:"待发货",value:"pending"}),e(i,{label:"已发货",value:"shipped"}),e(i,{label:"运输中",value:"in_transit"}),e(i,{label:"已签收",value:"delivered"}),e(i,{label:"异常",value:"exception"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"物流商"},{default:t(()=>[e(N,{modelValue:p.value.carrier,"onUpdate:modelValue":a[3]||(a[3]=l=>p.value.carrier=l),placeholder:"请选择物流商",clearable:""},{default:t(()=>[e(i,{label:"顺丰速运",value:"sf_express"}),e(i,{label:"中通快递",value:"zhongtong"}),e(i,{label:"申通快递",value:"shentong"}),e(i,{label:"圆通快递",value:"yuantong"}),e(i,{label:"韵达快递",value:"yunda"})]),_:1},8,["modelValue"])]),_:1}),e(s,null,{default:t(()=>[e(f,{type:"primary",onClick:w},{default:t(()=>[...a[15]||(a[15]=[m("搜索",-1)])]),_:1}),e(f,{onClick:T},{default:t(()=>[...a[16]||(a[16]=[m("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(A,{shadow:"never",class:"table-container"},{default:t(()=>[e(j,{data:y.value,stripe:"",style:{width:"100%"}},{default:t(()=>[e(u,{prop:"trackingNo",label:"物流单号","min-width":"180"}),e(u,{prop:"orderNo",label:"订单号","min-width":"180"}),e(u,{prop:"carrier",label:"物流商",width:"120",align:"center"},{default:t(l=>[e(z,{type:"primary"},{default:t(()=>[m(U(l.row.carrier==="sf_express"?"顺丰速运":l.row.carrier==="zhongtong"?"中通快递":l.row.carrier==="shentong"?"申通快递":l.row.carrier==="yuantong"?"圆通快递":"韵达快递"),1)]),_:2},1024)]),_:1}),e(u,{prop:"status",label:"物流状态",width:"120",align:"center"},{default:t(l=>[e(z,{type:l.row.status==="pending"?"info":l.row.status==="shipped"?"warning":l.row.status==="in_transit"||l.row.status==="delivered"?"success":"danger"},{default:t(()=>[m(U(l.row.status==="pending"?"待发货":l.row.status==="shipped"?"已发货":l.row.status==="in_transit"?"运输中":l.row.status==="delivered"?"已签收":"异常"),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"recipientName",label:"收件人",width:"120"}),e(u,{prop:"recipientPhone",label:"联系电话",width:"150"}),e(u,{prop:"recipientAddress",label:"收货地址","min-width":"200"}),e(u,{prop:"estimatedDelivery",label:"预计送达",width:"180"}),e(u,{prop:"actualDelivery",label:"实际送达",width:"180"}),e(u,{prop:"createdAt",label:"创建时间",width:"180"}),e(u,{label:"操作",width:"300",fixed:"right",align:"center"},{default:t(l=>[E("div",ke,[C((b(),_(f,{type:"primary",size:"small",onClick:x=>I(l.row)},{default:t(()=>[e(V,null,{default:t(()=>[e(v(ue))]),_:1}),a[17]||(a[17]=m(" 追踪 ",-1))]),_:1},8,["onClick"])),[[k,"logistics_view"]]),C((b(),_(f,{type:"warning",size:"small",onClick:x=>L(l.row)},{default:t(()=>[e(V,null,{default:t(()=>[e(v(pe))]),_:1}),a[18]||(a[18]=m(" 编辑 ",-1))]),_:1},8,["onClick"])),[[k,"logistics_edit"]]),C((b(),_(f,{type:"info",size:"small",onClick:x=>K(l.row)},{default:t(()=>[e(V,null,{default:t(()=>[e(v(ce))]),_:1}),a[19]||(a[19]=m(" 打印 ",-1))]),_:1},8,["onClick"])),[[k,"logistics_print"]]),C((b(),_(f,{type:"danger",size:"small",onClick:x=>R(l.row),disabled:l.row.status!=="pending"},{default:t(()=>[e(V,null,{default:t(()=>[e(v(me))]),_:1}),a[20]||(a[20]=m(" 取消 ",-1))]),_:1},8,["onClick","disabled"])),[[k,"logistics_cancel"]])])]),_:1})]),_:1},8,["data"])]),_:1}),E("div",Ce,[e(G,{"current-page":c.value.page,"onUpdate:currentPage":a[4]||(a[4]=l=>c.value.page=l),"page-size":c.value.pageSize,"onUpdate:pageSize":a[5]||(a[5]=l=>c.value.pageSize=l),"page-sizes":[10,20,50,100],total:c.value.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:B,onCurrentChange:Y},null,8,["current-page","page-size","total"])])]),e(we,{modelValue:h.value,"onUpdate:modelValue":a[14]||(a[14]=l=>h.value=l),title:"编辑物流单","is-loading":D.value,onConfirm:H},{default:t(()=>[e(P,{model:r.value,"label-width":"120px"},{default:t(()=>[e(s,{label:"物流单号"},{default:t(()=>[e(d,{modelValue:r.value.trackingNo,"onUpdate:modelValue":a[6]||(a[6]=l=>r.value.trackingNo=l),disabled:""},null,8,["modelValue"])]),_:1}),e(s,{label:"订单号"},{default:t(()=>[e(d,{modelValue:r.value.orderNo,"onUpdate:modelValue":a[7]||(a[7]=l=>r.value.orderNo=l),disabled:""},null,8,["modelValue"])]),_:1}),e(s,{label:"物流商"},{default:t(()=>[e(N,{modelValue:r.value.carrier,"onUpdate:modelValue":a[8]||(a[8]=l=>r.value.carrier=l),placeholder:"请选择物流商"},{default:t(()=>[e(i,{label:"顺丰速运",value:"sf_express"}),e(i,{label:"中通快递",value:"zhongtong"}),e(i,{label:"申通快递",value:"shentong"}),e(i,{label:"圆通快递",value:"yuantong"}),e(i,{label:"韵达快递",value:"yunda"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"收件人姓名"},{default:t(()=>[e(d,{modelValue:r.value.recipientName,"onUpdate:modelValue":a[9]||(a[9]=l=>r.value.recipientName=l),placeholder:"请输入收件人姓名"},null,8,["modelValue"])]),_:1}),e(s,{label:"联系电话"},{default:t(()=>[e(d,{modelValue:r.value.recipientPhone,"onUpdate:modelValue":a[10]||(a[10]=l=>r.value.recipientPhone=l),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1}),e(s,{label:"收货地址"},{default:t(()=>[e(d,{modelValue:r.value.recipientAddress,"onUpdate:modelValue":a[11]||(a[11]=l=>r.value.recipientAddress=l),type:"textarea",rows:3,placeholder:"请输入收货地址"},null,8,["modelValue"])]),_:1}),e(s,{label:"物流状态"},{default:t(()=>[e(N,{modelValue:r.value.status,"onUpdate:modelValue":a[12]||(a[12]=l=>r.value.status=l),placeholder:"请选择物流状态"},{default:t(()=>[e(i,{label:"待发货",value:"pending"}),e(i,{label:"已发货",value:"shipped"}),e(i,{label:"运输中",value:"in_transit"}),e(i,{label:"已签收",value:"delivered"}),e(i,{label:"异常",value:"exception"})]),_:1},8,["modelValue"])]),_:1}),e(s,{label:"预计送达时间"},{default:t(()=>[e(W,{modelValue:r.value.estimatedDelivery,"onUpdate:modelValue":a[13]||(a[13]=l=>r.value.estimatedDelivery=l),type:"datetime",placeholder:"请选择预计送达时间",format:"YYYY-MM-DD HH:mm:ss","value-format":"YYYY-MM-DD HH:mm:ss"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","is-loading"])]),_:1},8,["actions"])}}}),$e=ye(De,[["__scopeId","data-v-02080a4c"]]);export{$e as default};
