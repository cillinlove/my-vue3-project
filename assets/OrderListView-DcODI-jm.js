import{b as ue,E as pe}from"./el-button-DVrV4cDQ.js";import{E as ce}from"./el-overlay-_mPdsHLe.js";import{i as me,j as fe,b as ge,c as ve,e as _e,f as be,h as he}from"./el-table-column-BBRnyYHQ.js";import{E as ye}from"./el-tag-fQWpZZ3I.js";import{b as we,E as Se}from"./el-input-Dwtsn4FB.js";import{E as Ee}from"./el-card-LZGPE6VU.js";import{E as Ne}from"./el-date-picker-panel-ChjBQYMv.js";import{d as R,aF as K,e as ae,aG as q,aH as F,ap as Ce,av as se,b as G,I as De,_ as ne,f as k,k as S,o as f,s as E,X as $,ar as W,g as Y,t as e,aI as ke,aJ as ze,c as Pe,h as Te,n as M,r as te,x as d,F as b,aB as Ae,l as Ve,aK as $e,p as O,C as Ie,w as a,y as xe,z as H,B as Me}from"./index-BBqxh1Qt.js";import{O as B}from"./mockData-C7SYYOmC.js";import{f as Oe,h as Be}from"./api-D03_kbYf.js";import{P as Fe}from"./PageLayout-CIMKISqz.js";import{E as Le}from"./index-DlknRWU8.js";import"./index-CrP1vqAf.js";const J=Symbol("elDescriptions");var L=R({name:"ElDescriptionsCell",props:{cell:{type:Object},tag:{type:String,default:"td"},type:{type:String}},setup(){return{descriptions:se(J,{})}},render(){var I,g,r,N;const l=me(this.cell),h=(((I=this.cell)==null?void 0:I.dirs)||[]).map(_=>{const{dir:o,arg:c,modifiers:x,value:j}=_;return[o,j,c,x]}),{border:z,direction:v}=this.descriptions,s=v==="vertical",y=()=>{var _,o,c;return((c=(o=(_=this.cell)==null?void 0:_.children)==null?void 0:o.label)==null?void 0:c.call(o))||l.label},m=()=>{var _,o,c;return(c=(o=(_=this.cell)==null?void 0:_.children)==null?void 0:o.default)==null?void 0:c.call(o)},u=l.span,P=l.rowspan,w=l.align?`is-${l.align}`:"",C=l.labelAlign?`is-${l.labelAlign}`:w,D=l.className,A=l.labelClassName,i=this.type==="label"&&(r=(g=l.labelWidth)!=null?g:this.descriptions.labelWidth)!=null?r:l.width,t={width:K(i),minWidth:K(l.minWidth)},p=ae("descriptions");switch(this.type){case"label":return q(F(this.tag,{style:t,class:[p.e("cell"),p.e("label"),p.is("bordered-label",z),p.is("vertical-label",s),C,A],colSpan:s?u:1,rowspan:s?1:P},y()),h);case"content":return q(F(this.tag,{style:t,class:[p.e("cell"),p.e("content"),p.is("bordered-content",z),p.is("vertical-content",s),w,D],colSpan:s?u:u*2-1,rowspan:s?P*2-1:P},m()),h);default:{const _=y(),o={},c=K((N=l.labelWidth)!=null?N:this.descriptions.labelWidth);return c&&(o.width=c,o.display="inline-block"),q(F("td",{style:t,class:[p.e("cell"),w],colSpan:u,rowspan:P},[Ce(_)?void 0:F("span",{style:o,class:[p.e("label"),A]},_),F("span",{class:[p.e("content"),D]},m())]),h)}}}});const We=G({row:{type:De(Array),default:()=>[]}}),Ye={key:1},Re=R({name:"ElDescriptionsRow",__name:"descriptions-row",props:We,setup(I){const g=se(J,{});return(r,N)=>S(g).direction==="vertical"?(f(),k($,{key:0},[E("tr",null,[(f(!0),k($,null,W(r.row,(l,h)=>(f(),Y(S(L),{key:`tr1-${h}`,cell:l,tag:"th",type:"label"},null,8,["cell"]))),128))]),E("tr",null,[(f(!0),k($,null,W(r.row,(l,h)=>(f(),Y(S(L),{key:`tr2-${h}`,cell:l,tag:"td",type:"content"},null,8,["cell"]))),128))])],64)):(f(),k("tr",Ye,[(f(!0),k($,null,W(r.row,(l,h)=>(f(),k($,{key:`tr3-${h}`},[S(g).border?(f(),k($,{key:0},[e(S(L),{cell:l,tag:"td",type:"label"},null,8,["cell"]),e(S(L),{cell:l,tag:"td",type:"content"},null,8,["cell"])],64)):(f(),Y(S(L),{key:1,cell:l,tag:"td",type:"both"},null,8,["cell"]))],64))),128))]))}});var Ue=ne(Re,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/descriptions-row.vue"]]);const He=G({border:Boolean,column:{type:Number,default:3},direction:{type:String,values:["horizontal","vertical"],default:"horizontal"},size:ke,title:{type:String,default:""},extra:{type:String,default:""},labelWidth:{type:[String,Number]}}),oe="ElDescriptionsItem",je=R({name:"ElDescriptions",__name:"description",props:He,setup(I){const g=I,r=ae("descriptions"),N=ue(),l=ze();Ae(J,g);const h=Pe(()=>[r.b(),r.m(N.value)]),z=(s,y,m,u=!1)=>(s.props||(s.props={}),y>m&&(s.props.span=m),u&&(s.props.span=y),s),v=()=>{if(!l.default)return[];const s=fe(l.default()).filter(C=>{var D;return((D=C?.type)==null?void 0:D.name)===oe}),y=[];let m=[],u=g.column,P=0;const w=[];return s.forEach((C,D)=>{var A,i,t;const p=((A=C.props)==null?void 0:A.span)||1,_=((i=C.props)==null?void 0:i.rowspan)||1,o=y.length;if(w[o]||(w[o]=0),_>1)for(let c=1;c<_;c++)w[t=o+c]||(w[t]=0),w[o+c]++,P++;if(w[o]>0&&(u-=w[o],w[o]=0),D<s.length-1&&(P+=p>u?u:p),D===s.length-1){const c=g.column-P%g.column;m.push(z(C,c,u,!0)),y.push(m);return}p<u?(u-=p,m.push(C)):(m.push(z(C,p,u)),y.push(m),u=g.column,m=[])}),y};return(s,y)=>(f(),k("div",{class:M(h.value)},[s.title||s.extra||s.$slots.title||s.$slots.extra?(f(),k("div",{key:0,class:M(S(r).e("header"))},[E("div",{class:M(S(r).e("title"))},[te(s.$slots,"title",{},()=>[d(b(s.title),1)])],2),E("div",{class:M(S(r).e("extra"))},[te(s.$slots,"extra",{},()=>[d(b(s.extra),1)])],2)],2)):Te("v-if",!0),E("div",{class:M(S(r).e("body"))},[E("table",{class:M([S(r).e("table"),S(r).is("bordered",s.border)])},[E("tbody",null,[(f(!0),k($,null,W(v(),(m,u)=>(f(),Y(Ue,{key:u,row:m},null,8,["row"]))),128))])],2)],2)],2))}});var Ke=ne(je,[["__file","/home/runner/work/element-plus/element-plus/packages/components/descriptions/src/description.vue"]]);const le=["left","center","right"],qe=G({label:{type:String,default:""},span:{type:Number,default:1},rowspan:{type:Number,default:1},width:{type:[String,Number],default:""},minWidth:{type:[String,Number],default:""},labelWidth:{type:[String,Number]},align:{type:String,values:le,default:"left"},labelAlign:{type:String,values:le},className:{type:String,default:""},labelClassName:{type:String,default:""}}),re=R({name:oe,props:qe}),Ge=Ve(Ke,{DescriptionsItem:re}),Je=$e(re),Xe={class:"action-buttons"},Qe={class:"pagination-container"},Ze={class:"order-detail"},et={class:"dialog-footer"},tt=R({__name:"OrderListView",setup(I){const g={pending_payment:"待付款",paid:"已付款",shipped:"已发货",completed:"已完成",cancelled:"已取消"},r=O({status:void 0,startTime:void 0,endTime:void 0}),N=O([]),l=O({page:1,pageSize:10,total:0}),h=O([]),z=O(!1),v=O(null),s=async()=>{const i={...r.value,page:l.value.page,pageSize:l.value.pageSize},t=await Oe(i);h.value=t.list,l.value.total=t.total},y=()=>{N.value.length===2?(r.value.startTime=N.value[0],r.value.endTime=N.value[1]):(r.value.startTime=void 0,r.value.endTime=void 0),l.value.page=1,s(),H.success("搜索完成")},m=()=>{r.value={status:void 0,startTime:void 0,endTime:void 0},N.value=[],l.value.page=1,s(),H.success("重置完成")},u=i=>{v.value=i,z.value=!0},P=async i=>{try{await Le.confirm(`确定要为订单「${i.orderNo}」发货吗？此操作不可撤销。`,"发货确认",{confirmButtonText:"确定发货",cancelButtonText:"取消",type:"success",customClass:"ship-confirm-message-box",confirmButtonClass:"ship-confirm-btn",distinguishCancelAndClose:!0,autofocus:!1}),await Be(i.id,B.SHIPPED),H.success("发货成功"),s()}catch(t){t.message!=="cancel"&&H.error("发货失败")}},w=i=>{l.value.pageSize=i,s()},C=i=>{l.value.page=i,s()},D=(i="pending_payment")=>{switch(i){case B.PENDING_PAYMENT:return"warning";case B.PAID:return"primary";case B.SHIPPED:return"success";case B.COMPLETED:return"success";case B.CANCELLED:return"danger";default:return"info"}},A=i=>i?new Date(i).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"";return Ie(()=>{s()}),(i,t)=>{const p=he,_=ge,o=Se,c=Ne,x=pe,j=we,X=Ee,T=_e,Q=ye,Z=ve,ie=be,V=Je,ee=Ge,de=ce;return f(),Y(Fe,{title:"订单管理"},{default:a(()=>[e(X,{shadow:"never",class:"search-form"},{default:a(()=>[e(j,{inline:!0,onSubmit:xe(y,["prevent"])},{default:a(()=>[e(o,{label:"订单状态"},{default:a(()=>[e(_,{modelValue:r.value.status,"onUpdate:modelValue":t[0]||(t[0]=n=>r.value.status=n),placeholder:"请选择订单状态",clearable:"",style:{width:"180px"}},{default:a(()=>[(f(),k($,null,W(g,(n,U)=>e(p,{key:U,label:n,value:U},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(o,{label:"创建时间"},{default:a(()=>[e(c,{modelValue:N.value,"onUpdate:modelValue":t[1]||(t[1]=n=>N.value=n),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD",clearable:"",style:{width:"320px"}},null,8,["modelValue"])]),_:1}),e(o,null,{default:a(()=>[e(x,{type:"primary",onClick:y},{default:a(()=>[...t[6]||(t[6]=[d("搜索",-1)])]),_:1}),e(x,{onClick:m},{default:a(()=>[...t[7]||(t[7]=[d("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(X,{shadow:"never",class:"table-container"},{default:a(()=>[e(Z,{data:h.value,style:{width:"100%"},border:""},{default:a(()=>[e(T,{prop:"orderNo",label:"订单号","min-width":"150","show-overflow-tooltip":""}),e(T,{prop:"userName",label:"用户名称",width:"120",align:"center"}),e(T,{prop:"totalAmount",label:"总金额",width:"120",align:"center"},{default:a(n=>[d(b(n.row.totalAmount.toFixed(2)),1)]),_:1}),e(T,{prop:"status",label:"订单状态",width:"120",align:"center"},{default:a(n=>[e(Q,{type:D(n.row.status),size:"small"},{default:a(()=>[d(b(g[n.row.status]),1)]),_:2},1032,["type"])]),_:1}),e(T,{prop:"createdAt",label:"创建时间",width:"180",align:"center"},{default:a(n=>[d(b(A(n.row.createdAt)),1)]),_:1}),e(T,{label:"操作",width:"180",fixed:"right",align:"center"},{default:a(n=>[E("div",Xe,[e(x,{type:"primary",size:"small",onClick:U=>u(n.row)},{default:a(()=>[...t[8]||(t[8]=[d(" 查看详情 ",-1)])]),_:1},8,["onClick"]),e(x,{type:"success",size:"small",onClick:U=>P(n.row),disabled:n.row.status!=="paid"},{default:a(()=>[...t[9]||(t[9]=[d(" 发货 ",-1)])]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["data"]),E("div",Qe,[e(ie,{"current-page":l.value.page,"onUpdate:currentPage":t[2]||(t[2]=n=>l.value.page=n),"page-size":l.value.pageSize,"onUpdate:pageSize":t[3]||(t[3]=n=>l.value.pageSize=n),"page-sizes":[10,20,50,100],total:l.value.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:w,onCurrentChange:C},null,8,["current-page","page-size","total"])])]),_:1}),e(de,{modelValue:z.value,"onUpdate:modelValue":t[5]||(t[5]=n=>z.value=n),title:"订单详情",width:"800px","destroy-on-close":""},{footer:a(()=>[E("span",et,[e(x,{onClick:t[4]||(t[4]=n=>z.value=!1)},{default:a(()=>[...t[12]||(t[12]=[d("关闭",-1)])]),_:1})])]),default:a(()=>[E("div",Ze,[e(ee,{column:2,border:""},{default:a(()=>[e(V,{label:"订单号"},{default:a(()=>[d(b(v.value?.orderNo),1)]),_:1}),e(V,{label:"用户名称"},{default:a(()=>[d(b(v.value?.userName),1)]),_:1}),e(V,{label:"订单状态"},{default:a(()=>[e(Q,{type:D(v.value?.status||"pending_payment")},{default:a(()=>[d(b(g[v.value?.status||"pending_payment"]),1)]),_:1},8,["type"])]),_:1}),e(V,{label:"支付方式"},{default:a(()=>[d(b(v.value?.paymentMethod),1)]),_:1}),e(V,{label:"创建时间"},{default:a(()=>[d(b(A(v.value?.createdAt||"")),1)]),_:1}),e(V,{label:"总金额"},{default:a(()=>[d("¥"+b(v.value?.totalAmount.toFixed(2)),1)]),_:1})]),_:1}),t[10]||(t[10]=E("h3",{class:"section-title"},"收货地址",-1)),e(ee,{column:1,border:""},{default:a(()=>[e(V,{label:"收货地址"},{default:a(()=>[d(b(v.value?.shippingAddress),1)]),_:1}),e(V,{label:"联系电话"},{default:a(()=>[d(b(v.value?.contactPhone),1)]),_:1})]),_:1}),t[11]||(t[11]=E("h3",{class:"section-title"},"商品列表",-1)),e(Z,{data:v.value?.orderItems,stripe:"",style:{width:"100%"}},{default:a(()=>[e(T,{prop:"productName",label:"商品名称","min-width":"200"}),e(T,{prop:"price",label:"单价",width:"100"},{default:a(n=>[d("¥"+b(n.row.price.toFixed(2)),1)]),_:1}),e(T,{prop:"quantity",label:"数量",width:"80"}),e(T,{prop:"total",label:"小计",width:"100"},{default:a(n=>[d("¥"+b((n.row.price*n.row.quantity).toFixed(2)),1)]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"])]),_:1})}}}),gt=Me(tt,[["__scopeId","data-v-56b17d7e"]]);export{gt as default};
