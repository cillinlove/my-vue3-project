/* empty css                  *//* empty css                */import{u as A,a4 as w,d as R,au as W,av as G,c as q,b as s,j as t,v as a,i as d,G as O,F as $,a5 as c,t as E,w as n,h as U,e as o,I as h,x,aw as F,n as H,o as L,ap as j,p,_ as Y}from"./index-D3HzW_Px.js";const r={DASHBOARD_VIEW:"dashboard_view",PRODUCT_VIEW:"product_view",USER_VIEW:"user_view",ORDER_VIEW:"order_view",SYSTEM_VIEW:"system_view",SETTINGS_VIEW:"settings_view"},b=[{id:"dashboard",title:"仪表盘",icon:"Odometer",path:"/",requiredPermissions:[r.DASHBOARD_VIEW]},{id:"products",title:"商品管理",icon:"Goods",path:"/products/manage",requiredPermissions:[r.PRODUCT_VIEW]},{id:"orders",title:"订单管理",icon:"List",path:"/orders",requiredPermissions:[r.ORDER_VIEW]},{id:"users",title:"用户管理",icon:"User",path:"/user-center",requiredPermissions:[r.USER_VIEW]},{id:"sales",title:"销售报表",icon:"TrendCharts",path:"/sales",requiredPermissions:[r.DASHBOARD_VIEW]},{id:"promotions",title:"促销管理",icon:"Discount",path:"/promotion-center",requiredPermissions:[r.SETTINGS_VIEW]},{id:"content",title:"内容管理",icon:"Document",path:"/content-management",requiredPermissions:[r.SETTINGS_VIEW]},{id:"purchase",title:"采购中心",icon:"ShoppingCart",path:"/purchase-center",requiredPermissions:[r.SETTINGS_VIEW]},{id:"warehouse",title:"仓库管理",icon:"OfficeBuilding",path:"/wms-warehouse",requiredPermissions:[r.SETTINGS_VIEW]},{id:"dispatch",title:"调度中心",icon:"Van",path:"/dispatch-center",requiredPermissions:[r.SETTINGS_VIEW]},{id:"logistics",title:"物流中心",icon:"Location",path:"/logistics-center",requiredPermissions:[r.SETTINGS_VIEW]},{id:"system",title:"系统管理",icon:"Setting",path:"/permission-management",requiredPermissions:[r.SYSTEM_VIEW]},{id:"settings",title:"个人设置",icon:"UserFilled",path:"/settings",requiredPermissions:[r.SETTINGS_VIEW]}];function z(){const f=A(),P=i=>{if(!f.userInfo)return!1;if(f.userInfo.role==="admin")return!0;const l=f.userInfo.permissions||[];return typeof i=="string"?l.includes(i):Array.isArray(i)?i.every(_=>l.includes(_)):!1},S=w(()=>b.filter(i=>P(i.requiredPermissions))),I=w(()=>S.value.map(i=>({...i,isVisible:!0,hasChildren:!1}))),V=w(()=>({totalItems:b.length,visibleItems:I.value.length,hiddenItems:b.length-I.value.length,adminAccess:f.userInfo?.role==="admin"}));return{menuItems:I,stats:V,hasPermission:P,isMenuItemVisible:i=>{const l=b.find(_=>_.path===i);return l?P(l.requiredPermissions):!1},getMenuItemsByPermission:i=>I.value.filter(l=>l.requiredPermissions.includes(i)),isAdmin:w(()=>f.userInfo?.role==="admin")}}const J={class:"permission-demo"},K={class:"demo-header"},Q={class:"user-info"},X={class:"demo-content"},Z={class:"demo-section"},ee={class:"menu-list"},se={class:"demo-section"},te={class:"button-group"},ne={class:"demo-section"},ie={class:"permission-check"},re={class:"check-result"},oe={class:"check-result"},le={class:"demo-section"},ue={class:"admin-buttons"},de={class:"demo-section"},ae=R({__name:"PermissionDemoView",setup(f){const P=L(),S=A(),{menuItems:I}=z(),V=W("dashboard_view"),C=W("product_create"),D=W("user_delete"),i=G(),l=w(()=>i.hasAll(["product_view","product_edit"])),_=w(()=>i.hasAny(["product_create","user_delete"])),B=T=>({dashboard_view:"primary",product_view:"success",product_create:"warning",user_view:"info",user_delete:"danger",system_view:"danger"})[T]||"default",v=T=>{H.success(`您点击了: ${T}`)},M=()=>{P.push("/permission-management")};return(T,e)=>{const g=h,m=U,k=x,N=F,y=j("permission");return p(),q("div",J,[s("div",K,[e[10]||(e[10]=s("h1",null,"权限系统演示页面",-1)),s("div",Q,[s("p",null,[e[7]||(e[7]=s("strong",null,"用户名:",-1)),t(" "+a(d(S).userInfo?.username),1)]),s("p",null,[e[8]||(e[8]=s("strong",null,"角色:",-1)),t(" "+a(d(S).userInfo?.role),1)]),s("p",null,[e[9]||(e[9]=s("strong",null,"权限:",-1)),t(" "+a(d(S).userInfo?.permissions?.join(", ")),1)])])]),s("div",X,[s("section",Z,[e[11]||(e[11]=s("h2",null,"1. 路由权限演示",-1)),e[12]||(e[12]=s("p",null,"当前用户可以访问的菜单项：",-1)),s("div",ee,[(p(!0),q(O,null,$(d(I),u=>(p(),E(g,{key:u.id,class:"menu-item",type:B(u.requiredPermissions?.[0]||"dashboard_view")},{default:n(()=>[t(a(u.title),1)]),_:2},1032,["type"]))),128))]),e[13]||(e[13]=s("p",{class:"note"},"* 只有具有相应权限的用户才能看到这些菜单项",-1))]),s("section",se,[e[18]||(e[18]=s("h2",null,"2. v-permission自定义指令演示",-1)),e[19]||(e[19]=s("p",null,"根据权限显示/隐藏按钮：",-1)),s("div",te,[c((p(),E(m,{type:"primary",onClick:e[0]||(e[0]=u=>v("仪表盘查看权限"))},{default:n(()=>[...e[14]||(e[14]=[t(" 查看仪表盘 ",-1)])]),_:1})),[[y,"dashboard_view"]]),c((p(),E(m,{type:"success",onClick:e[1]||(e[1]=u=>v("商品创建权限"))},{default:n(()=>[...e[15]||(e[15]=[t(" 创建商品 ",-1)])]),_:1})),[[y,"product_create"]]),c((p(),E(m,{type:"danger",onClick:e[2]||(e[2]=u=>v("用户删除权限"))},{default:n(()=>[...e[16]||(e[16]=[t(" 删除用户 ",-1)])]),_:1})),[[y,"user_delete"]]),c((p(),E(m,{type:"warning",onClick:e[3]||(e[3]=u=>v("商品查看+编辑权限"))},{default:n(()=>[...e[17]||(e[17]=[t(" 查看编辑商品 ",-1)])]),_:1})),[[y,["product_view","product_edit"]]])]),e[20]||(e[20]=s("p",{class:"note"},"* 只有具有相应权限的用户才能看到对应的按钮",-1))]),s("section",ne,[e[28]||(e[28]=s("h2",null,"3. 权限检查函数演示",-1)),e[29]||(e[29]=s("p",null,"使用usePermission和useBatchPermission函数：",-1)),s("div",ie,[o(k,{class:"permission-card"},{header:n(()=>[...e[21]||(e[21]=[s("span",null,"单个权限检查",-1)])]),default:n(()=>[s("div",re,[s("p",null,[e[22]||(e[22]=t("dashboard_view: ",-1)),o(g,{type:d(V)?"success":"danger"},{default:n(()=>[t(a(d(V)?"有权限":"无权限"),1)]),_:1},8,["type"])]),s("p",null,[e[23]||(e[23]=t("product_create: ",-1)),o(g,{type:d(C)?"success":"danger"},{default:n(()=>[t(a(d(C)?"有权限":"无权限"),1)]),_:1},8,["type"])]),s("p",null,[e[24]||(e[24]=t("user_delete: ",-1)),o(g,{type:d(D)?"success":"danger"},{default:n(()=>[t(a(d(D)?"有权限":"无权限"),1)]),_:1},8,["type"])])])]),_:1}),o(k,{class:"permission-card"},{header:n(()=>[...e[25]||(e[25]=[s("span",null,"批量权限检查",-1)])]),default:n(()=>[s("div",oe,[s("p",null,[e[26]||(e[26]=t("所有权限 [product_view, product_edit]: ",-1)),o(g,{type:l.value?"success":"danger"},{default:n(()=>[t(a(l.value?"有权限":"无权限"),1)]),_:1},8,["type"])]),s("p",null,[e[27]||(e[27]=t("任一权限 [product_create, user_delete]: ",-1)),o(g,{type:_.value?"success":"danger"},{default:n(()=>[t(a(_.value?"有权限":"无权限"),1)]),_:1},8,["type"])])])]),_:1})])]),s("section",le,[e[34]||(e[34]=s("h2",null,"4. 管理员功能演示",-1)),e[35]||(e[35]=s("p",null,"只有管理员才能看到的内容：",-1)),c((p(),E(N,{title:"管理员专用功能区域",type:"warning",closable:!1,"show-icon":""},{default:n(()=>[...e[30]||(e[30]=[s("p",null,"这里只有拥有system_view权限的用户才能看到。",-1)])]),_:1})),[[y,"system_view"]]),c((p(),q("div",ue,[o(m,{type:"danger",onClick:e[4]||(e[4]=u=>v("系统设置功能"))},{default:n(()=>[...e[31]||(e[31]=[t("系统设置",-1)])]),_:1}),o(m,{type:"warning",onClick:e[5]||(e[5]=u=>v("用户管理功能"))},{default:n(()=>[...e[32]||(e[32]=[t("用户管理",-1)])]),_:1}),o(m,{type:"info",onClick:e[6]||(e[6]=u=>v("权限分配功能"))},{default:n(()=>[...e[33]||(e[33]=[t("权限分配",-1)])]),_:1})])),[[y,"system_view"]])]),s("section",de,[e[37]||(e[37]=s("h2",null,"5. 权限测试",-1)),e[38]||(e[38]=s("p",null,"测试没有权限时的处理：",-1)),o(m,{onClick:M},{default:n(()=>[...e[36]||(e[36]=[t("测试403页面",-1)])]),_:1}),e[39]||(e[39]=s("p",{class:"note"},"* 如果用户没有权限，路由守卫会自动跳转到403页面",-1))])])])}}}),fe=Y(ae,[["__scopeId","data-v-5b331f54"]]);export{fe as default};
