/* empty css                  *//* empty css                        *//* empty css                             *//* empty css                *//* empty css                 *//* empty css                             */import{d as q,r as _,q as j,t as G,w as t,e,m as R,l as W,E as X,f as J,L as K,c as Q,F as Z,G as ee,a1 as te,h as ae,j as o,x as le,b as v,M as oe,N as se,v as n,I as ne,S as re,a2 as ie,a3 as de,W as ue,n as h,X as pe,p as k,Y as me,_ as ce}from"./index-D3HzW_Px.js";import{O as f}from"./mockData-BJpfVYbw.js";import{l as _e,m as ve}from"./api-DmWqOvHR.js";import{P as fe}from"./PageLayout-C2MZ-4xL.js";const ge={class:"action-buttons"},be={class:"pagination-container"},we={class:"order-detail"},ye={class:"dialog-footer"},he=q({__name:"OrderListView",setup(Ee){const E={pending_payment:"待付款",paid:"已付款",shipped:"已发货",completed:"已完成",cancelled:"已取消"},r=_({orderNo:void 0,userName:void 0,status:void 0,startTime:void 0,endTime:void 0}),m=_([]),i=_({page:1,pageSize:10,total:0}),C=_([]),w=_(!1),d=_(null),c=async()=>{const s={...r.value,page:i.value.page,pageSize:i.value.pageSize},a=await _e(s);C.value=a.list,i.value.total=a.total},N=()=>{m.value.length===2?(r.value.startTime=m.value[0],r.value.endTime=m.value[1]):(r.value.startTime=void 0,r.value.endTime=void 0),i.value.page=1,c(),h.success("搜索完成")},M=()=>{r.value={orderNo:void 0,userName:void 0,status:void 0,startTime:void 0,endTime:void 0},m.value=[],i.value.page=1,c(),h.success("重置完成")},A=s=>{d.value=s,w.value=!0},I=async s=>{try{await pe.confirm(`确定要为订单「${s.orderNo}」发货吗？此操作不可撤销。`,"发货确认",{confirmButtonText:"确定发货",cancelButtonText:"取消",type:"success",customClass:"ship-confirm-message-box",confirmButtonClass:"ship-confirm-btn",distinguishCancelAndClose:!0,autofocus:!1}),await ve(s.id,f.SHIPPED),h.success("发货成功"),c()}catch(a){a.message!=="cancel"&&h.error("发货失败")}},L=s=>{i.value.pageSize=s,c()},O=s=>{i.value.page=s,c()},V=(s="pending_payment")=>{switch(s){case f.PENDING_PAYMENT:return"warning";case f.PAID:return"primary";case f.SHIPPED:return"success";case f.COMPLETED:return"success";case f.CANCELLED:return"danger";default:return"info"}},x=s=>s?new Date(s).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):"";return j(()=>{c()}),(s,a)=>{const S=J,g=X,Y=me,B=K,F=te,b=ae,U=R,D=le,u=se,T=ne,z=oe,H=re,p=de,P=ie,$=ue;return k(),G(fe,{title:"订单管理"},{default:t(()=>[e(D,{shadow:"never",class:"search-form"},{default:t(()=>[e(U,{inline:!0,onSubmit:W(N,["prevent"])},{default:t(()=>[e(g,{label:"订单号"},{default:t(()=>[e(S,{modelValue:r.value.orderNo,"onUpdate:modelValue":a[0]||(a[0]=l=>r.value.orderNo=l),placeholder:"请输入订单号",clearable:"",style:{width:"180px"}},null,8,["modelValue"])]),_:1}),e(g,{label:"用户名称"},{default:t(()=>[e(S,{modelValue:r.value.userName,"onUpdate:modelValue":a[1]||(a[1]=l=>r.value.userName=l),placeholder:"请输入用户名称",clearable:"",style:{width:"150px"}},null,8,["modelValue"])]),_:1}),e(g,{label:"订单状态"},{default:t(()=>[e(B,{modelValue:r.value.status,"onUpdate:modelValue":a[2]||(a[2]=l=>r.value.status=l),placeholder:"请选择订单状态",clearable:"",style:{width:"180px"}},{default:t(()=>[(k(),Q(ee,null,Z(E,(l,y)=>e(Y,{key:y,label:l,value:y},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),e(g,{label:"创建时间"},{default:t(()=>[e(F,{modelValue:m.value,"onUpdate:modelValue":a[3]||(a[3]=l=>m.value=l),type:"daterange","range-separator":"至","start-placeholder":"开始日期","end-placeholder":"结束日期","value-format":"YYYY-MM-DD HH:mm:ss",format:"YYYY-MM-DD",clearable:"",style:{width:"320px"}},null,8,["modelValue"])]),_:1}),e(g,null,{default:t(()=>[e(b,{type:"primary",onClick:N},{default:t(()=>[...a[8]||(a[8]=[o("搜索",-1)])]),_:1}),e(b,{onClick:M},{default:t(()=>[...a[9]||(a[9]=[o("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(D,{shadow:"never",class:"table-container"},{default:t(()=>[e(z,{data:C.value,style:{width:"100%"},border:""},{default:t(()=>[e(u,{prop:"orderNo",label:"订单号","min-width":"150","show-overflow-tooltip":""}),e(u,{prop:"userName",label:"用户名称",width:"120",align:"center"}),e(u,{prop:"totalAmount",label:"总金额",width:"120",align:"center"},{default:t(l=>[o(n(l.row.totalAmount.toFixed(2)),1)]),_:1}),e(u,{prop:"status",label:"订单状态",width:"120",align:"center"},{default:t(l=>[e(T,{type:V(l.row.status),size:"small"},{default:t(()=>[o(n(E[l.row.status]),1)]),_:2},1032,["type"])]),_:1}),e(u,{prop:"createdAt",label:"创建时间",width:"180",align:"center"},{default:t(l=>[o(n(x(l.row.createdAt)),1)]),_:1}),e(u,{label:"操作",width:"180",fixed:"right",align:"center"},{default:t(l=>[v("div",ge,[e(b,{type:"primary",size:"small",onClick:y=>A(l.row)},{default:t(()=>[...a[10]||(a[10]=[o(" 查看详情 ",-1)])]),_:1},8,["onClick"]),e(b,{type:"success",size:"small",onClick:y=>I(l.row),disabled:l.row.status!=="paid"},{default:t(()=>[...a[11]||(a[11]=[o(" 发货 ",-1)])]),_:1},8,["onClick","disabled"])])]),_:1})]),_:1},8,["data"]),v("div",be,[e(H,{"current-page":i.value.page,"onUpdate:currentPage":a[4]||(a[4]=l=>i.value.page=l),"page-size":i.value.pageSize,"onUpdate:pageSize":a[5]||(a[5]=l=>i.value.pageSize=l),"page-sizes":[10,20,50,100],total:i.value.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:L,onCurrentChange:O},null,8,["current-page","page-size","total"])])]),_:1}),e($,{modelValue:w.value,"onUpdate:modelValue":a[7]||(a[7]=l=>w.value=l),title:"订单详情",width:"800px","destroy-on-close":""},{footer:t(()=>[v("span",ye,[e(b,{onClick:a[6]||(a[6]=l=>w.value=!1)},{default:t(()=>[...a[14]||(a[14]=[o("关闭",-1)])]),_:1})])]),default:t(()=>[v("div",we,[e(P,{column:2,border:""},{default:t(()=>[e(p,{label:"订单号"},{default:t(()=>[o(n(d.value?.orderNo),1)]),_:1}),e(p,{label:"用户名称"},{default:t(()=>[o(n(d.value?.userName),1)]),_:1}),e(p,{label:"订单状态"},{default:t(()=>[e(T,{type:V(d.value?.status||"pending_payment")},{default:t(()=>[o(n(E[d.value?.status||"pending_payment"]),1)]),_:1},8,["type"])]),_:1}),e(p,{label:"支付方式"},{default:t(()=>[o(n(d.value?.paymentMethod),1)]),_:1}),e(p,{label:"创建时间"},{default:t(()=>[o(n(x(d.value?.createdAt||"")),1)]),_:1}),e(p,{label:"总金额"},{default:t(()=>[o("¥"+n(d.value?.totalAmount.toFixed(2)),1)]),_:1})]),_:1}),a[12]||(a[12]=v("h3",{class:"section-title"},"收货地址",-1)),e(P,{column:1,border:""},{default:t(()=>[e(p,{label:"收货地址"},{default:t(()=>[o(n(d.value?.shippingAddress),1)]),_:1}),e(p,{label:"联系电话"},{default:t(()=>[o(n(d.value?.contactPhone),1)]),_:1})]),_:1}),a[13]||(a[13]=v("h3",{class:"section-title"},"商品列表",-1)),e(z,{data:d.value?.orderItems,stripe:"",style:{width:"100%"}},{default:t(()=>[e(u,{prop:"productName",label:"商品名称","min-width":"200"}),e(u,{prop:"price",label:"单价",width:"100"},{default:t(l=>[o("¥"+n(l.row.price.toFixed(2)),1)]),_:1}),e(u,{prop:"quantity",label:"数量",width:"80"}),e(u,{prop:"total",label:"小计",width:"100"},{default:t(l=>[o("¥"+n((l.row.price*l.row.quantity).toFixed(2)),1)]),_:1})]),_:1},8,["data"])])]),_:1},8,["modelValue"])]),_:1})}}}),Me=ce(he,[["__scopeId","data-v-bbc68a32"]]);export{Me as default};
