import{E as F}from"./el-button-Vc6VEKII.js";import{b as P,h as A,c as N,e as $,f as K}from"./el-table-column-DnVx5bAE.js";import{E as L}from"./el-tag-H94PFL3m.js";import{b as j,E as O,a as R}from"./el-input-CFf0CTHR.js";import{E as q}from"./el-card-CgDv5Emn.js";import{d as G,p as f,C as H,g as J,w as l,t as e,s as h,y as Q,v as W,x as u,F as E,E as X,k as g,aD as Y,at as Z,aE as ee,z as d,o as te,B as ae}from"./index-ClAeb_nj.js";import{v as le,w as oe}from"./api-D03_kbYf.js";import{P as ne}from"./PageLayout-2dU49uLu.js";import{E as se}from"./index-Az46Y9ah.js";import"./mockData-C7SYYOmC.js";const re={class:"action-buttons"},ie={class:"pagination-container"},ue=G({__name:"ContentManagementView",setup(pe){const s=f({title:"",type:void 0,status:void 0}),o=f({page:1,pageSize:10,total:0}),v=f([]),i=async()=>{try{const n={page:o.value.page,pageSize:o.value.pageSize,title:s.value.title,type:s.value.type,status:s.value.status},t=await le(n);v.value=t.list,o.value.total=t.total}catch(n){d.error("获取内容列表失败："+(n.message||"未知错误"))}},_=async()=>{o.value.page=1,await i()},z=async()=>{s.value={title:"",type:void 0,status:void 0},o.value.page=1,await i()},V=async n=>{o.value.pageSize=n,await i()},x=n=>{o.value.page=n,i()},S=()=>{d.info("新增内容功能开发中")},k=n=>{d.success("编辑功能开发中")},B=async n=>{try{await se.confirm(`确定要删除内容「${n.title}」吗？此操作不可撤销。`,"删除确认",{confirmButtonText:"确定删除",cancelButtonText:"取消",type:"warning",customClass:"delete-confirm-message-box",confirmButtonClass:"delete-confirm-btn",distinguishCancelAndClose:!0,autofocus:!1}),await oe(n.id),await i(),d.success("删除成功")}catch(t){t!=="cancel"&&t!=="close"&&(d.error("删除失败："+(t.message||"未知错误")),console.error("删除内容失败:",t))}};return H(()=>{i()}),(n,t)=>{const M=R,c=O,p=A,y=P,m=F,T=j,b=q,r=$,w=L,C=X,I=N,U=K;return te(),J(ne,{title:"内容管理",actions:[{type:"primary",text:"新增内容",icon:g(ee),onClick:S}]},{default:l(()=>[e(b,{shadow:"never",class:"search-form"},{default:l(()=>[e(T,{inline:!0,onSubmit:Q(_,["prevent"])},{default:l(()=>[e(c,{label:"内容标题"},{default:l(()=>[e(M,{modelValue:s.value.title,"onUpdate:modelValue":t[0]||(t[0]=a=>s.value.title=a),placeholder:"请输入内容标题",clearable:"",onKeyup:W(_,["enter"])},null,8,["modelValue"])]),_:1}),e(c,{label:"内容类型"},{default:l(()=>[e(y,{modelValue:s.value.type,"onUpdate:modelValue":t[1]||(t[1]=a=>s.value.type=a),placeholder:"请选择内容类型",clearable:""},{default:l(()=>[e(p,{label:"文章",value:"article"}),e(p,{label:"横幅",value:"banner"}),e(p,{label:"公告",value:"notice"})]),_:1},8,["modelValue"])]),_:1}),e(c,{label:"内容状态"},{default:l(()=>[e(y,{modelValue:s.value.status,"onUpdate:modelValue":t[2]||(t[2]=a=>s.value.status=a),placeholder:"请选择内容状态",clearable:""},{default:l(()=>[e(p,{label:"草稿",value:"draft"}),e(p,{label:"已发布",value:"published"})]),_:1},8,["modelValue"])]),_:1}),e(c,null,{default:l(()=>[e(m,{type:"primary",onClick:_},{default:l(()=>[...t[5]||(t[5]=[u("搜索",-1)])]),_:1}),e(m,{onClick:z},{default:l(()=>[...t[6]||(t[6]=[u("重置",-1)])]),_:1})]),_:1})]),_:1})]),_:1}),e(b,{shadow:"never",class:"table-container"},{default:l(()=>[e(I,{data:v.value,border:"",style:{width:"100%"}},{default:l(()=>[e(r,{prop:"id",label:"内容ID",width:"80",align:"center"}),e(r,{prop:"title",label:"内容标题","min-width":"250"}),e(r,{prop:"type",label:"内容类型",width:"120",align:"center"},{default:l(a=>[e(w,{type:a.row.type==="article"?"primary":a.row.type==="banner"?"success":"warning"},{default:l(()=>[u(E(a.row.type==="article"?"文章":a.row.type==="banner"?"横幅":"公告"),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"status",label:"状态",width:"100",align:"center"},{default:l(a=>[e(w,{type:a.row.status==="draft"?"warning":a.row.status==="published"?"success":"info"},{default:l(()=>[u(E(a.row.status==="draft"?"草稿":a.row.status==="published"?"已发布":""),1)]),_:2},1032,["type"])]),_:1}),e(r,{prop:"createdAt",label:"创建时间",width:"180"}),e(r,{prop:"sort",label:"排序",width:"80",align:"center"}),e(r,{label:"操作",width:"200",fixed:"right",align:"center"},{default:l(a=>[h("div",re,[e(m,{type:"primary",size:"small",onClick:D=>k(a.row)},{default:l(()=>[e(C,null,{default:l(()=>[e(g(Y))]),_:1}),t[7]||(t[7]=u(" 编辑 ",-1))]),_:1},8,["onClick"]),e(m,{type:"danger",size:"small",onClick:D=>B(a.row)},{default:l(()=>[e(C,null,{default:l(()=>[e(g(Z))]),_:1}),t[8]||(t[8]=u(" 删除 ",-1))]),_:1},8,["onClick"])])]),_:1})]),_:1},8,["data"])]),_:1}),h("div",ie,[e(U,{"current-page":o.value.page,"onUpdate:currentPage":t[3]||(t[3]=a=>o.value.page=a),"page-size":o.value.pageSize,"onUpdate:pageSize":t[4]||(t[4]=a=>o.value.pageSize=a),"page-sizes":[10,20,50,100],total:o.value.total,layout:"total, sizes, prev, pager, next, jumper",onSizeChange:V,onCurrentChange:x},null,8,["current-page","page-size","total"])])]),_:1},8,["actions"])}}}),Ce=ae(ue,[["__scopeId","data-v-00fc856c"]]);export{Ce as default};
